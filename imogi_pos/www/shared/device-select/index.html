{% extends "templates/web.html" %}

{% block base_scripts %}
{# Override to prevent Frappe from loading default scripts that cause 404 errors #}
{% endblock %}

{% block head_include %}
{# Override to prevent Frappe from preloading scripts that don't exist #}
{% endblock %}

{% block style %}
<link rel="stylesheet" href="/assets/imogi_pos/css/core.css">
<style>
  .device-select {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
    padding: 2rem;
  }
  .device-select .device-link {
    display: inline-block;
    padding: 1rem 2rem;
    font-size: 1.1rem;
    cursor: pointer;
    text-decoration: none;
    color: var(--color-black, #000);
    border: 1px solid var(--gray-300, #ccc);
    border-radius: 4px;
    background-color: var(--gray-100, #f8f9fa);
  }
  .device-select .device-link:visited {
    color: var(--color-black, #000);
  }
</style>
{% endblock %}

{% block page_content %}
{% if setup_error %}
{% include "imogi_pos/templates/includes/error_page.html" %}
{% else %}
<div class="device-select">
    <a class="device-link" data-device="kiosk" href="/opening-balance?device=kiosk&next=/service-select">{{ _("Kiosk") }}</a>
  <a class="device-link" data-device="cashier" href="/cashier-console">{{ _("Cashier") }}</a>
</div>
{% endif %}
{% endblock %}

{% block script %}
{% if not setup_error %}
<!-- Frappe polyfill for standalone pages -->
<script src="/assets/imogi_pos/js/core/frappe_polyfill.js"></script>
<script src="/assets/imogi_pos/js/core/nav.js"></script>
<script src="/assets/imogi_pos/js/core/auth.js"></script>
<script src="../device-select/index.js"></script>
{% endif %}
{% endblock %}
